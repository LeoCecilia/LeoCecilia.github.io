<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="vivian blog">
<meta property="og:url" content="https://leocecilia.github.io/index.html">
<meta property="og:site_name" content="vivian blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vivian blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://leocecilia.github.io/"/>





  <title> vivian blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">vivian blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-resume">
          <a href="/resume" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            简历
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/04/17/公司代码规范/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/17/公司代码规范/" itemprop="url">
                  company-html's trick
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-17T23:01:20+08:00">
                2017-04-17
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><ul>
<li><p>建立树形结构时，使用<code>dl</code>,<code>dt</code>,<code>dd</code>标签，而不是使用<code>ul li</code>标签，如此便不需要另外为第一个<code>li</code>设置title样式</p>
</li>
<li><p>若顶栏和侧边栏<strong>固定</strong>时，内容栏可使用<code>iframe</code>进行异步加载，若该内容栏中有诸如新建这种需要跳转别的页面的功能，则可使用<code>div</code>嵌套<code>iframe</code>来实现异步加载。(即有两个<code>iframe</code>)</p>
<ul>
<li>具体做法：加载内容页时，嵌套的<code>iframe</code>的父层设为<code>display:none;</code>，且嵌套的<code>iframe</code>的<code>src=&quot;&quot;</code>，当点击新建btn时，再向iframe的父层设为<code>display:block;</code>，并将嵌套的<code>iframe</code>的<code>src=</code>对应的html路径</li>
</ul>
</li>
</ul>
<ul>
<li><p>呈现表格的时候，要将表头，和表身分开成两个<code>div</code>嵌套<code>table</code>，并把表身<strong>定高</strong>，<strong>这样做是为了当表身内容无限多的时候，可产生滚动条</strong>，这样子，表头便固定在表格的顶部，用户体验就会更加好</p>
</li>
<li><p>弹窗的时候，其主要的html是</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"overlay-window"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">iframe</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"caption"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">iframe</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>第一个<code>iframe</code>的src值为空，其目的是为了遮住视频控件，因为视频控件的<code>z-index</code>是相当高的，而第二个则是加载另外一个页面</p>
</li>
<li><p>要灵活运用自定义属性，以达到Js的扩展性</p>
</li>
<li><p>段落元素无法包裹块级元素，这样会大大降低在chrome浏览器的可读性，<code>span</code>是可以包裹住<code>span</code>的。</p>
</li>
<li><p>要熟练使用w3c标准，多使用语义化标签</p>
</li>
<li><p>要注意主次之分，使用pd10这些bootstrap的class只是为了不影响其他类名，切不可滥用这些类名，这会导致调试不方便（每次都要修改的时候都要在html上进行修改</p>
</li>
<li><p>可使用<code>overflow: auto</code>，使其在内容超出范围时产生滚动条。</p>
</li>
<li><p>啊，我又忘记了要好好思考那个html,css布局了，<strong>!important</strong>，如果思考的不仔细的话，可能会影响到日后的Js的编码，绝对不能重复，回去之后一定要改回来！</p>
</li>
<li><p>自适应布局，主要特点是：不设定高度，当内容超出容器范围时，出现滚动条。解决方法：将其设为绝对定位布局，并且设定其位置，其父级亦设成绝对定位<code>position: absolute;</code>，并设定其具体位置（<code>top</code>,<code>left</code>之类的），以避免内部文本超出文本流(即将父级与子级在同一层)</p>
</li>
<li><p>每当刷新页面时，有时候，页面会突闪(抖动)纵向滚动条（出现后立即消失，且内容很少，不足以出现滚动条），先说说解决方法，直接在<code>&lt;body&gt;&lt;/body&gt;</code>上设置<code>overflow: hidden;</code>(只要<strong>不</strong>设高度，overflow:hidden;便不会将超出的内容隐藏掉),便可解决这问题。</p>
</li>
<li><p>让文字只在一行当中呈现，不断行，使用<code>class=&quot;text-overflow&quot;</code>(bootstrap的class)，与此同时，该元素需要设置<strong>宽度</strong>，这样便能呈现出该文字便能在一行当中呈现，而超出的部分用<code>...</code>展示</p>
</li>
</ul>
<h2 id="感想"><a href="#感想" class="headerlink" title="感想"></a>感想</h2><p><strong> 2017年4月25日</strong><br><br>最近真的有些本末倒置了，在公司写页面的时候，直接就将别人的代码复制，也没有去思考如果自己写布局的话该怎么写，明明人家写的很冗杂，还不断在那里浪费时间地去想，为什么这里没有显示出来啊，之类的东西。提高自己的开发效率应该是</p>
<blockquote>
<p>在下手之前，先在脑子里构思这布局该怎么写，然后再去参考别人是否已经实现了相同的结构，若有则可直接复制，若没有，则需要自己编写，这样才叫提升开发效率</p>
</blockquote>
<p>而我呢，却只是没头没脑的复制别人的代码，也不先思考一下这是不是合理的结构，亦或是高效率的代码，完全把自己的那一套给丢弃了，长久以往，我便会变成一个不会独立思考的人，只会不经大脑地使用别人的代码，自己却得不到提升。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/04/15/辞职感受/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/15/辞职感受/" itemprop="url">
                  辞职感受
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-15T15:03:49+08:00">
                2017-04-15
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="自我感受"><a href="#自我感受" class="headerlink" title="自我感受"></a>自我感受</h2><p>刚开始的时候进入方遒，觉得在方遒里前端做项目的感觉，应该是跟在学校里和他人组队完成项目的过程是差不多的性质，我们可以互相讨论问题，相互解决问题，从而完成项目，这也是一个自学过程，而且期间还有实习补贴，所以应该能够适应和得到提升的，但是经过这几天的工作，我发现方遒是没有一位正职的前端开发工程师，带我的那个也是一位应届毕业生，这个让我有点失望</p>
<p>然后我发现，公司的项目很赶，每当我遇到问题后，并且经过谷歌和百度搜索及个人调试后没找到解决方案，苦思不得其解，正想询问师兄解决方法之时，发现他们也很忙，我也不好继续打扰，耽误他们的开发进度。照这样发展下去项目太干了，自己边没有太多时间去整理思路，便可能会直接上网复制代码，也没有时间去理解其实现思路，更勿论代码可复用性及性能优化</p>
<p>而此时，佳都公司亦打电话说，他们想要录取我入职，那是一家比较正式大规模的，与公安机关合作的公司，其有自己开发的组件，以及模块化的代码思路(可扩展性和代码复用性)，这是相当不错的公司，于是我便毫不犹豫地转向该公司了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/04/13/事件委托/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/13/事件委托/" itemprop="url">
                  jquery事件委托方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-13T20:03:58+08:00">
                2017-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前些天做了个点赞的效果，那时候没有用到事件委托的方法，想来相比起用事件委托方法，性能锐减，所以现在记录一下jquery中不同的事件绑定，触发，解绑的方法以及用途</p>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>事件代理是指将事件绑定到父级元素中，然后等待事件通过DOM冒泡到该元素再执行，事件侦听中有事件冒泡和事件捕获两种方法，而jquery中通过事件冒泡方式来实现事件代理，分别有<code>bind()</code>,<code>live()</code>,<code>delegate()</code>,<code>on(&#39;click&#39;function)</code>方法来实现事件的绑定</p>
<ul>
<li>事件冒泡：从发生事件的元素向其祖先元素冒泡</li>
<li>事件捕获：事件在DOM中寻找子元素</li>
</ul>
<hr>
<p>现在介绍一下事件绑定有那些方法</p>
<h2 id="最普通的事件绑定click"><a href="#最普通的事件绑定click" class="headerlink" title="最普通的事件绑定click()"></a>最普通的事件绑定click()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"#div1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"点击后触发"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>不提供解绑定方法，且要每个元素逐一绑定</p>
<h2 id="可解绑定的on-‘click’-function"><a href="#可解绑定的on-‘click’-function" class="headerlink" title="可解绑定的on(‘click’,function)"></a>可解绑定的on(‘click’,function)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"#div1"</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"点击后触发"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>可使用<code>$(&#39;#div1&#39;).off(&#39;click&#39;);</code>解除绑定</p>
<h2 id="bind-方法-使用冒泡的形式"><a href="#bind-方法-使用冒泡的形式" class="headerlink" title="bind()方法(使用冒泡的形式)"></a>bind()方法(使用冒泡的形式)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"#div1"</span>).bind(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> <span class="title">consoleMe</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"点击后触发"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>可使用<code>unbind()</code>解除绑定<br>注意：<code>bind()</code>仅适用于为DOM中<strong>已经存在</strong>的元素绑定事件处理函数，<strong>动态生成</strong>的DOM元素，则不起作用<br>eg:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">   	$(<span class="string">'.box'</span>).bind(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       	$(<span class="keyword">this</span>).clone().appendTo(<span class="string">'.container'</span>);        </div><div class="line">   	&#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>运行结果，单击第一个链接，会追加元素，但是除了第一个链接，其余都<strong>没有</strong>被绑定<code>click</code>事件</p>
<h2 id="live"><a href="#live" class="headerlink" title="live()"></a>live()</h2><p><code>live()</code>在jquery1.9以后已被丢弃，但现在仍记录一下其用法，<code>live()</code>与<code>bind()</code>的最大区别<strong>在于<code>live()</code>不仅作用于已经存在的DOM元素，还作用于将来动态生成的元素</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">   	$(<span class="string">'.box'</span>).live(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       	$(<span class="keyword">this</span>).clone().appendTo(<span class="string">'.container'</span>);        </div><div class="line">   	&#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>注意<code>live()</code>使用了<strong>事件委托</strong>的方法，但是它有所下几个缺点：</p>
<ol>
<li><code>$()</code>函数会找到当前页面的所有.box元素并创建jquery对象，但在确认事件明白时却不用这个.box元素的组合，而是使用选择符表达式与<code>event.target</code>或其祖先元素进行比较，所以生成jquery对象会导致不必要的开销</li>
<li><code>live()</code>默认把事件绑定到<code>$(document)</code>元素，如果DOM嵌套很深，事件冒泡通过大量祖先元素会导致性能缺失</li>
<li>只有<code>$(&#39;.container .box&#39;)</code>才能使用<code>live()</code>，<code>$(&#39;.container&#39;).find(&#39;.box&#39;)</code>不行。<br>hack手段，早委托方式，其必须在head元素中进行加载，放在尾部则不管用</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</div><div class="line">	$(<span class="string">"#info_table td"</span>).live(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;/显示更多信息/&#125;);</div><div class="line">&#125;)(jQuery);<span class="comment">//jQuery对象</span></div></pre></td></tr></table></figure>
<h2 id="delegate"><a href="#delegate" class="headerlink" title="delegate()"></a>delegate()</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'.container'</span>).delegate(<span class="string">'.box'</span>,<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      $(<span class="keyword">this</span>).clone().appendTo(<span class="string">'.container:first'</span>);<span class="comment">//若没有涉及到数值的改变，则可以这般写，否则的话，其便会共用一个作用域，</span></div><div class="line">      <span class="comment">//解决方法有两个，一个是创建闭包，另一个是通过绑定一个Id选择器来获取该元素，并进行事件委托</span></div><div class="line">   &#125;);</div></pre></td></tr></table></figure>
<p><code>delegate()</code>使用了<strong>事件委托</strong>的方法，其根元素是具体绑定的元素，由此看来，使用<code>delegate()</code>要比<code>live()</code>效率更高。</p>
<p>提示：使用事件委托时，如果注册到目标元素上的其他事件处理程序使用.stopPropagation()阻止了事件传播，那么事件委托就会<strong>失效</strong>。</p>
<h2 id="on-‘click’-’-box’-function-是比较新的方法"><a href="#on-‘click’-’-box’-function-是比较新的方法" class="headerlink" title="on(‘click’,’.box’,function)是比较新的方法"></a>on(‘click’,’.box’,function)是比较新的方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'.container'</span>).on(<span class="string">'click'</span>,<span class="string">'.box'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      $(<span class="keyword">this</span>).clone().appendTo(<span class="string">'.container:first'</span>);<span class="comment">//若没有涉及到数值的改变，则可以这般写，否则的话，其便会共用一个作用域，</span></div><div class="line">      <span class="comment">//解决方法有两个，一个是创建闭包，另一个是通过绑定一个Id选择器来获取该元素，并进行事件委托</span></div><div class="line">   &#125;);</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/04/10/Repeated Substring Pattern/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/10/Repeated Substring Pattern/" itemprop="url">
                  Repeated Substring Pattern
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-10T17:26:22+08:00">
                2017-04-10
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p><a href="https://leetcode.com/problems/repeated-substring-pattern/#/description" target="_blank" rel="external">需求链接</a></p>
<p>Given a non-empty string check if it can be constructed by taking a substring of it and appending multiple copies of the substring together. You may assume the given string consists of lowercase English letters only and its length will not exceed 10000.</p>
<h2 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h2><p>问题给了我们一个字符串，问能否拆成n个重复的子串。因此既然能拆分，那么每个子串的长度不能大于原字串长度的一半，那么我们可以从源字符串长度的一半遍历到1，如果当前长度能被总长度整除，说明可以分成若干个字符串，我们将这些子字符串拼接起来看跟原字符串是否相等。 如果拆完了都不相等，返回false。</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> repeatedSubstringPattern = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> len = s.length;</div><div class="line">    <span class="keyword">if</span>(s.length===<span class="number">1</span>)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="built_in">Math</span>.ceil(len/<span class="number">2</span>);i&gt;=<span class="number">1</span>;i--) &#123;<span class="comment">//至少得两个元素，才能看看是不是重复</span></div><div class="line">        <span class="keyword">if</span>(len%i===<span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">//如果能被整除，说明能分成若干个字符串，然后将这若干字符串拼接起来后的字符串，跟源字符串相等的话，那就说明相等，否则不等</span></div><div class="line">            <span class="keyword">var</span> c = len/i,t=<span class="string">''</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>;j&lt;c;j++)&#123;</div><div class="line">                t+=s.substr(<span class="number">0</span>,i);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(t===s) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/04/07/company-intern-experience/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/07/company-intern-experience/" itemprop="url">
                  intern-experience
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-07T10:49:03+08:00">
                2017-04-07
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="实习情况"><a href="#实习情况" class="headerlink" title="实习情况"></a>实习情况</h2><p>今天是上班的第二天了，这几天我做了2个静态页面和一些Js效果。最大的感触大概就是公司需求变动还是挺大的，首先是table布局不被允许，他们说是因为table现在没什么人知道其特性，但是我觉得既然只是显示数据，那么<code>table</code>就是最好的布局啊。。。可是最后还是改成了<code>ul li</code>布局。</p>
<p>第一次不用bootstrap框架和normalize.css来写静态页面，发现很多页面上有很多潜在的错误是我之前没有发现的，比如用<code>display: inline-block</code>可能会导致html上的元素和有js生成的相同标签的元素会有不同的间隙，这个时候就需要用到<code>float:left</code>来解除潜在的错误!</p>
<p>然后的话，还有一个错误我没有找出来，那就是在jquery中，当我点击<code>button</code>后，然后将该<code>button</code>删除，接着再添加同样的<code>button</code>，当再次点击的时候jquery就找不到那个<code>button</code>，然后我就不知道为什么了。</p>
<p>不过今天get到一个tip，那就是，hover元素的时候之后，会弹出tooltip，鼠标移去tooltip后，tooltip仍是<code>display:block;</code>，解决方法就是，让hover的元素放置在一个透明的父级里，让该父级的宽度要涵盖tooltip和hover元素，便可实现该效果。</p>
<p>再然后就是，当提交有冲突的时候，我好像没有解决那些冲突问题，每次都是叫人帮忙解决，下次得自己解决一下那些问题。</p>
<hr>
<p>继续更新，周末去加班了，感觉今天的状态真的不太好，头晕，今天的任务主要是实现点赞反对的动态效果。现在说说今天遇到的问题。</p>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li><p>以为元素只有一个，所以就没有考虑元素的扩展性，后来我就花了一倍的时间去完成那个效果。以后写代码之前，一定要先看清楚页面，问清楚需求，然后考虑js的扩展性</p>
</li>
<li><p>今天小组内所有人都在写着几个页面，所以在提交的时候，代码就发生了冲突，然后怎么搞都搞不定，最后就只能自己将自己修改的那部分，复制到记事本中，然后等明天复制粘贴过去。日后的解决方法便是每次要写其他文件时，要先询问其他人用没有做，然后进行提交，亦或是当天每个人写了的页面，其他人不许修改，这样子才能够避免冲突</p>
</li>
<li><p>交互逻辑出现了点问题，刚开始的时候是以样式来判断点赞或去点的，然后样式的改变是在ajax请求成功以后才执行，然而这是一个<strong>错误</strong>的思路，<strong>正确</strong>的思路是应该在元素上自定义属性，然后根据该属性的值，进行ajax请求，最后再改变其样式以及要渲染的数据!</p>
</li>
<li><p>要看清楚接口文档中的url,千万不要搞错,不然会被搞死的</p>
</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li><p>以前自己自学前端的时候，没有跟后台进行交互，不会遇到现在这些问题，所以才说，业务的实践是自身所遇瓶颈的下限。但是不管如何都要巩固自己的基础，不然的话，你永远都只是一个页面仔，无法成为一个架构师!</p>
</li>
<li><p>要多点考虑元素的扩展性啊，这是相当重要的一件事情，还有代码的规范啊。</p>
</li>
<li><p>要多写js，这样的话，写css/html的时候，就会想着要为日后写js的时候,获取更方便的获取元素。</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/03/31/interview experience/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/31/interview experience/" itemprop="url">
                  面试经历
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-31T16:54:28+08:00">
                2017-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>经过一个星期的写简历，一个星期的等待时间，一个星期的面试时间，我终于都拿到了offer，感觉实在是不容易啊，现在特别记录一下面试时候的感觉。</p>
<h2 id="软通动力面试"><a href="#软通动力面试" class="headerlink" title="软通动力面试"></a>软通动力面试</h2><p>刚开始进去感觉还有点小紧张，然后进去了之后，就让做一份试题，是关于前端的试题，里面有很多试题是我没有见过的，但是那里感觉有很多题目都是直接css写在html上面的，顿时就感觉这家外包公司在编码规范上就做得不太好，但是呢，有些css的属性我也确实忘记了，想起先前我一直都是使用的搜索式的学习，所以有很多属性都记得不太清楚。后来呢，那个hr就说对java开发感不感兴趣啊，可以来我们这里进行培训，然后每个月有1000块钱的补贴，说实话，那时候确实有一点点小动心。但是转念一想觉得世界上哪里有那么多便宜的事情啊，人家去培训你，肯定是要和你签订合约的，到时候合同上有什么猫腻的话，你还不就死定了，哎，又没有技术面试，想想就觉得不开心</p>
<h2 id="方遒教育面试"><a href="#方遒教育面试" class="headerlink" title="方遒教育面试"></a>方遒教育面试</h2><p>这次面试差点就迟到了，哎，下次出门应该再早点才行的。面试过程先进行了自我介绍，然后呢，说一下自己的项目经验什么之类的，后来他问到了关于jquery的想法，面完之后，我才发现我对<strong>ajax技术</strong>其实并不太了解，想想还是得多点回去啃书，补回基础。后来，我就问他，我现在的状态或者说我所掌握的知识程度怎么样。然后他说我现在的状态其实还挺不错的，但是我学的不够深入，基础也不太扎实，如果有人带着的话，带我会上手的相对快一些，啊觉得回去多看基础还是挺重要的。</p>
<h2 id="佳都科技面试"><a href="#佳都科技面试" class="headerlink" title="佳都科技面试"></a>佳都科技面试</h2><p>这次又是路痴的问题，哎不说了。刚开始面试官不按常理的出牌，顿时就将我的思路弄乱，以致于差点把面试搞砸了。然后面试官看了我的作品，于是我就把我的树形组件做给她看，但是一打开遍历的时候，发现这个遍历有bug，顿时就觉得相当的尴尬，而恰好我又忘记了自己原来已经带了鼠标，然后就很不好意思地问她，有没有网络/有没有鼠标啊之类的问题，这样的自己让我感觉很心慌。然后我就给她看了我自己做的静态页面，她觉得我这几个月做了这么多东西，已经相当不错了，顿时心中的紧张缓解了不少。然后她就让我去做机试，写了两个页面，其中一个实现tab变换，需要用到事件委托，然后当我真正去做的时候，发现有很多属性我都忘记了(这不正是所谓的搜索式的学习嘛，确实很不好)，然后心里就有点急，做了大概两个小时，终于将这个页面做好了(js代码写了20行)，然后当她看到页面的时候，就说页面实现的还挺不错的，可是我的js并没有考虑<strong>扩展性</strong>！这是相当重要的。比如说要是需求有所变动的话，那你岂不是都要改嘛。接着她仅用了4行代码就实现了那个功能，这真的把我给秒杀了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>),<span class="comment">//不用重复请求</span></div><div class="line">	id = $<span class="keyword">this</span>.attr(attrid);<span class="comment">//获取自定义属性</span></div><div class="line">$<span class="keyword">this</span>.addClass(<span class="string">'active'</span>).sibling().removeClass(<span class="string">'active'</span>);<span class="comment">//这里使用了链式调用，是相当节省性能的</span></div><div class="line">$(id).css(<span class="string">'display'</span>,<span class="string">'block'</span>).sibling(<span class="string">'main'</span>).css(<span class="string">'display'</span>,<span class="string">'none'</span>);</div></pre></td></tr></table></figure>
<p>顿时心中油然而生一股崇拜之情！然后她就说</p>
<blockquote>
<p>我发现你们这些应届生喜欢用插件去追求一些很酷炫的动效，但是却忽略了基础本身，要多看jquery，重拾回基础，其实很多大公司招应届生，首先考你的都是你的基础是否扎实，当然各种的网络协议啊，计算机基础都是要考到的。</p>
</blockquote>
<p>后来她就跟我说，其实她真的挺喜欢我的，但是她们只招大四，申请一下，看看能不能让我进去做前端开发吧</p>
<h2 id="后序"><a href="#后序" class="headerlink" title="后序"></a>后序</h2><p>三家的面试终于完满落幕，哈哈哈，姐姐我拿到了方遒教育的offer了，感觉还是挺开心的，希望能拿到更多的offer，这样选择权就能在我手中啦!</p>
<h2 id="面试总结"><a href="#面试总结" class="headerlink" title="面试总结"></a>面试总结</h2><ol>
<li>要有积极的心理暗示，觉得既然人家邀请你去面试，说明你的实习经历或者说教育经历是符合人家的需求，所以要自信，并且本着能让HR获得指标的心态，开开心心地去面试</li>
<li>要多看书，自己的基础不行，要知道大公司找实习都是要先问你计算机基础的，因为他面前端程序员之前，他是先面一个程序员的，所以基础是很重要的！</li>
<li>要多虚心向别人学习，好好学习，方能够天天向上哦！加油</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/03/23/IE和标准DOM事件模型的区别/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/23/IE和标准DOM事件模型的区别/" itemprop="url">
                  事件模型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-23T12:34:44+08:00">
                2017-03-23
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="EventTarget接口"><a href="#EventTarget接口" class="headerlink" title="EventTarget接口"></a>EventTarget接口</h2><p>DOM事件操作(监听和触发)，都定义在<code>EventTarget</code>接口</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/03/19/spy-on-scroll/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/19/spy-on-scroll/" itemprop="url">
                  事件滚动侦听
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-19T16:44:38+08:00">
                2017-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>简历中，需要做到这样的效果，当某个元素出现在视口时，动画开始启动，现在来介绍如何获得某个元素在网页上的确切位置，下面教程总结了javascript在网页定位方面的相关知识</p>
<h2 id="网页大小和浏览器窗口大小"><a href="#网页大小和浏览器窗口大小" class="headerlink" title="网页大小和浏览器窗口大小"></a>网页大小和浏览器窗口大小</h2><ul>
<li>两个概念<ul>
<li>网页大小指一张网页的全部面积，通常情况下，网页的大小由内容和css样式表决定。</li>
<li>浏览器窗口大小，则是值在浏览器窗口中看到的那部分网页面积，又叫viewport(视口)。</li>
</ul>
</li>
</ul>
<p>很显然，如果网页的内容能够在浏览器窗口中全部显示（也就是不出现滚动条），那么网页的大小和浏览器窗口的大小是相等的。如果不能全部显示，则滚动浏览器窗口，可以显示出网页的各个部分。</p>
<h2 id="获取网页大小"><a href="#获取网页大小" class="headerlink" title="获取网页大小"></a>获取网页大小</h2><ul>
<li>clientHeight和clientWidth属性</li>
</ul>
<p><img src="http://i260.photobucket.com/albums/ii7/ruanyf/blog/bg2009091402.gif" alt="clientHeight和clientWidth属性"><br>(图一 clientHeight和clientWidth属性)<br>因此，document元素的<code>clientHeight</code>和<code>clientWidht</code>属性代表网页大小</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">getViewport</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"BackCompat"</span>)&#123;</div><div class="line">　　　　　　<span class="keyword">return</span> &#123;</div><div class="line">　　　　　　　　<span class="attr">width</span>: <span class="built_in">document</span>.body.clientWidth,</div><div class="line">　　　　　　　　<span class="attr">height</span>: <span class="built_in">document</span>.body.clientHeight</div><div class="line">　　　　　　&#125;</div><div class="line">　　　　&#125; <span class="keyword">else</span> &#123;</div><div class="line">　　　　　　<span class="keyword">return</span> &#123;</div><div class="line">　　　　　　　　<span class="attr">width</span>: <span class="built_in">document</span>.documentElement.clientWidth,</div><div class="line">　　　　　　　　<span class="attr">height</span>: <span class="built_in">document</span>.documentElement.clientHeight</div><div class="line">　　　　　　&#125;</div><div class="line">　　　　&#125;</div><div class="line">　　&#125;</div></pre></td></tr></table></figure>
<p><code>getViewport</code>函数就可以返回浏览器高和宽，需注意</p>
<blockquote>
<ol>
<li>这个函数必须在页面加载完成后才能运行，否则document对象还没生成，浏览器会报错。</li>
<li>大多数情况下，都是<code>document.documentElement.clientWidth</code>返回正确值。但是，在IE6的quirks模式中，<code>document.body.clientWidth</code>返回正确的值，因此函数中加入了对文档模式的判断。</li>
<li><code>clientWidth</code>和<code>clientHeight</code>都是只读属性，不能对它们赋值。</li>
</ol>
</blockquote>
<h2 id="获取网页大小的另一种方法"><a href="#获取网页大小的另一种方法" class="headerlink" title="获取网页大小的另一种方法"></a>获取网页大小的另一种方法</h2><ul>
<li><code>scrollHeight</code>和<code>scrollWidth</code>属性，指包含滚动条在内的视觉面积。</li>
<li><code>document</code>对象的<code>scrollHeight</code>和<code>scrollWidth</code>属性就是网页的大小，意思就是滚动条滚过的所有长度和宽度。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPagearea</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"BackCompat"</span>)&#123;</div><div class="line">　　　　　　<span class="keyword">return</span> &#123;</div><div class="line">　　　　　　　　<span class="attr">width</span>: <span class="built_in">document</span>.body.scrollWidth,</div><div class="line">　　　　　　　　<span class="attr">height</span>: <span class="built_in">document</span>.body.scrollHeight</div><div class="line">　　　　　　&#125;</div><div class="line">　　　　&#125; <span class="keyword">else</span> &#123;</div><div class="line">　　　　　　<span class="keyword">return</span> &#123;</div><div class="line">　　　　　　　　<span class="attr">width</span>: <span class="built_in">document</span>.documentElement.scrollWidth,</div><div class="line">　　　　　　　　<span class="attr">height</span>: <span class="built_in">document</span>.documentElement.scrollHeight</div><div class="line">　　　　　　&#125;</div><div class="line">　　　　&#125;</div><div class="line">　　&#125;</div></pre></td></tr></table></figure>
<p>但是，这个函数有一个问题。<strong>如果网页内容能够在浏览器窗口中全部显示，不出现滚动条，那么网页的clientWidth和scrollWidth应该相等。</strong>但是实际上，不同浏览器有不同的处理，这两个值未必相等。所以，我们需要取它们之中较大的那个值，因此要对getPagearea()函数进行改写。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPagearea</span>(<span class="params"></span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"BackCompat"</span>)&#123;</div><div class="line">　　　　　　<span class="keyword">return</span> &#123;</div><div class="line">　　　　　　　　<span class="attr">width</span>: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.body.scrollWidth,</div><div class="line">　　　　　　　　　　　　　　　　<span class="built_in">document</span>.body.clientWidth),</div><div class="line">　　　　　　　　<span class="attr">height</span>: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.body.scrollHeight,</div><div class="line">　　　　　　　　　　　　　　　　<span class="built_in">document</span>.body.clientHeight)</div><div class="line">　　　　　　&#125;</div><div class="line">　　　　&#125; <span class="keyword">else</span> &#123;</div><div class="line">　　　　　　<span class="keyword">return</span> &#123;</div><div class="line">　　　　　　　　<span class="attr">width</span>: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollWidth,</div><div class="line">　　　　　　　　　　　　　　　　<span class="built_in">document</span>.documentElement.clientWidth),</div><div class="line">　　　　　　　　<span class="attr">height</span>: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollHeight,</div><div class="line">　　　　　　　　　　　　　　　　<span class="built_in">document</span>.documentElement.clientHeight)</div><div class="line">　　　　　　&#125;</div><div class="line">　　　　&#125;</div><div class="line">　　&#125;</div></pre></td></tr></table></figure>
<h2 id="获取网页元素的绝对位置"><a href="#获取网页元素的绝对位置" class="headerlink" title="获取网页元素的绝对位置"></a>获取网页元素的绝对位置</h2><ul>
<li>网页元素的绝对位置，指该元素的左上角相当于整张网页左上角的坐标，这个绝对位置需通过计算方能得到。</li>
<li><code>offsetTop</code>和<code>offsetLeft</code>属性，表示该元素左上角与父容器(<code>offsetParent</code>对象)左上角的距离。所以，只需要将这两个值进行累加，就可以得到该元素的绝对坐标<br><img src="http://i260.photobucket.com/albums/ii7/ruanyf/blog/bg2009091403.gif" alt="offsetTop和offsetLft属性"></li>
</ul>
<p>以下两个函数可以用来获取绝对位置的横坐标和纵坐标</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">getElementLeft</span>(<span class="params">element</span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">var</span> actualLeft = element.offsetLeft;</div><div class="line">　　　　<span class="keyword">var</span> current = element.offsetParent;</div><div class="line">　　　　<span class="keyword">while</span> (current !== <span class="literal">null</span>)&#123;</div><div class="line">　　　　　　actualLeft += current.offsetLeft;</div><div class="line">　　　　　　current = current.offsetParent;</div><div class="line">　　　　&#125;</div><div class="line">　　　　<span class="keyword">return</span> actualLeft;</div><div class="line">　　&#125;</div><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">getElementTop</span>(<span class="params">element</span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">var</span> actualTop = element.offsetTop;</div><div class="line">　　　　<span class="keyword">var</span> current = element.offsetParent;</div><div class="line">　　　　<span class="keyword">while</span> (current !== <span class="literal">null</span>)&#123;</div><div class="line">　　　　　　actualTop += current.offsetTop;</div><div class="line">　　　　　　current = current.offsetParent;</div><div class="line">　　　　&#125;</div><div class="line">　　　　<span class="keyword">return</span> actualTop;</div><div class="line">　　&#125;</div></pre></td></tr></table></figure>
<p>由于在表格和iframe中，offsetParent对象未必等于父容器，所以上面的函数对于表格和iframe中的元素不适用。</p>
<h2 id="获取网页元素的相对位置"><a href="#获取网页元素的相对位置" class="headerlink" title="获取网页元素的相对位置"></a>获取网页元素的相对位置</h2><ul>
<li><p>网页元素的相对位置，指该元素左上角相当于浏览器窗口左上角的坐标，有了绝对位置后，获取相对位置就容易了，只要将绝对坐标减去页面的滚动条滚动的距离即可。</p>
</li>
<li><p>document的<code>scrollTop</code>属性指的是滚动条滚动的垂直距离。同理<code>scrollLeft</code>是滚动条滚动的水平距离。</p>
</li>
</ul>
<p><img src="http://i260.photobucket.com/albums/ii7/ruanyf/blog/bg2009091404.gif" alt="获取元素的相对位置"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">　<span class="function"><span class="keyword">function</span> <span class="title">getElementViewLeft</span>(<span class="params">element</span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">var</span> actualLeft = element.offsetLeft;</div><div class="line">　　　　<span class="keyword">var</span> current = element.offsetParent;</div><div class="line">　　　　<span class="keyword">while</span> (current !== <span class="literal">null</span>)&#123;</div><div class="line">　　　　　　actualLeft += current.offsetLeft;</div><div class="line">　　　　　　current = current.offsetParent;</div><div class="line">　　　　&#125;</div><div class="line">　　　　<span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"BackCompat"</span>)&#123;</div><div class="line">　　　　　　<span class="keyword">var</span> elementScrollLeft=<span class="built_in">document</span>.body.scrollLeft;</div><div class="line">　　　　&#125; <span class="keyword">else</span> &#123;</div><div class="line">　　　　　　<span class="keyword">var</span> elementScrollLeft=<span class="built_in">document</span>.documentElement.scrollLeft; </div><div class="line">　　　　&#125;</div><div class="line">　　　　<span class="keyword">return</span> actualLeft-elementScrollLeft;</div><div class="line">　　&#125;</div><div class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">getElementViewTop</span>(<span class="params">element</span>)</span>&#123;</div><div class="line">　　　　<span class="keyword">var</span> actualTop = element.offsetTop;</div><div class="line">　　　　<span class="keyword">var</span> current = element.offsetParent;</div><div class="line">　　　　<span class="keyword">while</span> (current !== <span class="literal">null</span>)&#123;</div><div class="line">　　　　　　actualTop += current. offsetTop;</div><div class="line">　　　　　　current = current.offsetParent;</div><div class="line">　　　　&#125;</div><div class="line">　　　　 <span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"BackCompat"</span>)&#123;</div><div class="line">　　　　　　<span class="keyword">var</span> elementScrollTop=<span class="built_in">document</span>.body.scrollTop;</div><div class="line">　　　　&#125; <span class="keyword">else</span> &#123;</div><div class="line">　　　　　　<span class="keyword">var</span> elementScrollTop=<span class="built_in">document</span>.documentElement.scrollTop; </div><div class="line">　　　　&#125;</div><div class="line">　　　　<span class="keyword">return</span> actualTop-elementScrollTop;</div><div class="line">　　&#125;</div></pre></td></tr></table></figure>
<p><code>scrollLeft</code>和<code>scrollTop</code>属性是可以赋值的，并且会立即自动滚动网页的相应位置，可以利用他们改变网页的相对位置。<code>element.scrollIntoView()</code>方法也有类似的这样，可使网页元素出现在浏览器窗口的左上角。</p>
<h2 id="获取元素位置的快速方法"><a href="#获取元素位置的快速方法" class="headerlink" title="获取元素位置的快速方法"></a>获取元素位置的快速方法</h2><ul>
<li><code>getBoundingClientRect()</code>，返回一个对象，包含<code>left</code>,<code>right</code>,<code>top</code>,<code>bottom</code>四个属性，分别对应该元素的左上角和右下角相当于浏览器窗口(viewport)左上角的距离<br>所以，网页元素的相对位置为</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">　　<span class="keyword">var</span> X= <span class="keyword">this</span>.getBoundingClientRect().left;</div><div class="line"></div><div class="line">　　<span class="keyword">var</span> Y =<span class="keyword">this</span>.getBoundingClientRect().top;</div></pre></td></tr></table></figure>
<p>再加上滚动距离，就可以得到绝对位置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">　　<span class="keyword">var</span> X= <span class="keyword">this</span>.getBoundingClientRect().left+<span class="built_in">document</span>.documentElement.scrollLeft;</div><div class="line"></div><div class="line">　　<span class="keyword">var</span> Y =<span class="keyword">this</span>.getBoundingClientRect().top+<span class="built_in">document</span>.documentElement.scrollTop;</div></pre></td></tr></table></figure>
<p>转载自<a href="http://www.ruanyifeng.com/blog/2009/09/find_element_s_position_using_javascript.html" target="_blank" rel="external">利用js获取元素位置</a></p>
<h2 id="滚动事件侦听"><a href="#滚动事件侦听" class="headerlink" title="滚动事件侦听"></a>滚动事件侦听</h2><ul>
<li><code>window.scroll()</code>是用于侦听页面滚动的元素<br><a href="http://www.runoob.com/jquery/event-scroll.html" target="_blank" rel="external">参考链接</a></li>
</ul>
<p>以上是储备知识，现在来说一下我在编码中所遇到的困境</p>
<hr>
<h2 id="困境"><a href="#困境" class="headerlink" title="困境"></a>困境</h2><p>在调试的时候，<code>window.scroll()</code>无法运行，通过stackflow查询到</p>
<blockquote>
<p>webkit use <code>body</code> for keeping track of scrolling，document.documentElement.scrollTop always returns 0 on chrome</p>
</blockquote>
<p>而恰好为了让每个section都占据这个viewport，我将body的<code>height</code>设成了<code>100%</code>，所以当我remove这个css之后，<code>window.scroll()</code>正常运行，现附上代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> top = <span class="built_in">document</span>.getElementById(<span class="string">'Skill'</span>).getBoundingClientRect().top;</div><div class="line">    <span class="keyword">if</span> (!flag) &#123;<span class="comment">//只有一次机会</span></div><div class="line"></div><div class="line">      <span class="keyword">var</span> barList = $(<span class="string">'.progress-bar'</span>);</div><div class="line"></div><div class="line">      <span class="keyword">if</span> (top &lt;= <span class="number">0</span>) &#123; <span class="comment">//outerHeight()[jquery] === offsetHeight[js]</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; barList.length; i++) &#123;</div><div class="line">          flag = <span class="number">1</span>;</div><div class="line">          <span class="comment">//barList[i]是一个DOM，故要使用$(barList[i])返回该jquery对象</span></div><div class="line">          <span class="keyword">var</span> Width = $(barList[i]).attr(<span class="string">'aria-valuenow'</span>) + <span class="string">'%'</span>;</div><div class="line">          $(barList[i]).animate(&#123;</div><div class="line">            <span class="attr">width</span>: Width</div><div class="line">          &#125;, <span class="number">750</span>);</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> Top = <span class="built_in">document</span>.getElementById(<span class="string">'Contact'</span>).getBoundingClientRect().top;</div><div class="line">    <span class="keyword">if</span> (Top &lt;= <span class="number">0</span> &amp;&amp; handle) &#123;</div><div class="line">      handle = <span class="literal">false</span>;</div><div class="line">      $(<span class="string">'.flip-container'</span>).toggleClass(<span class="string">'flip'</span>);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Top &gt; <span class="number">0</span>) &#123;</div><div class="line">      handle = <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/03/18/turn-over-effect/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/18/turn-over-effect/" itemprop="url">
                  画面翻转
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-18T21:30:02+08:00">
                2017-03-18
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>网上有很多关于画面翻转的教程，现在转载一篇个人认为比较好的做法</p>
<h2 id="HTML代码"><a href="#HTML代码" class="headerlink" title="HTML代码"></a>HTML代码</h2><p>实现正反面效果的HTML代码，估计你想到该是这样的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"flip-container"</span> <span class="attr">ontouchstart</span>=<span class="string">"this.classList.toggle('hover');"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"flipper"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"front"</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 前面内容 --&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"back"</span>&gt;</span></div><div class="line">			<span class="comment">&lt;!-- 背面内容 --&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>正如你所想，有两个容器，分别存放卡片‘前面’和‘后面’，通过css，我们会指定这两个容器元素自己的这样。<strong>注意</strong><code>ontouchstart</code>这段js，能让你使用触屏来触发翻转动作，显然应该将这段代码单独提取，让javaScript代码放到一起</p>
<h2 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 翻转动画 */</span></div><div class="line"><span class="selector-class">.flip-container</span>&#123;</div><div class="line">  <span class="attribute">-webkit-perspective</span>: <span class="number">1000</span>;</div><div class="line">  <span class="attribute">perspective</span>: <span class="number">1000</span>;<span class="comment">/*透视属性*/</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.flip-container</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.flipper</span>, <span class="selector-class">.flip-container</span><span class="selector-class">.hover</span> <span class="selector-class">.flipper</span>&#123;</div><div class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(180deg);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.flip-container</span>, <span class="selector-class">.front</span>, <span class="selector-class">.back</span>&#123;</div><div class="line">  <span class="attribute">width</span>: <span class="number">95px</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">95px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* flip speed goes here */</span></div><div class="line"><span class="selector-class">.flipper</span> &#123;</div><div class="line">  <span class="attribute">transition</span>: <span class="number">0.6s</span>;</div><div class="line">  <span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</div><div class="line">  <span class="attribute">position</span>: relative;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* hide back of pane during swap */</span></div><div class="line"><span class="selector-class">.front</span>,<span class="selector-class">.back</span>&#123;</div><div class="line">  <span class="attribute">backface-visibility</span>: hidden;<span class="comment">/* 背面可视性 */</span></div><div class="line">  <span class="attribute">position</span>: absolute;</div><div class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</div><div class="line">  <span class="attribute">background</span>: <span class="number">#eee</span>;</div><div class="line">  <span class="attribute">display</span>: flex;</div><div class="line">  <span class="attribute">justify-content</span>: center;</div><div class="line">  <span class="attribute">align-items</span>: center;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* placed above back */</span></div><div class="line"><span class="selector-class">.front</span> &#123;</div><div class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</div><div class="line">  <span class="attribute">box-shadow</span>: <span class="number">8px</span> <span class="number">10px</span> <span class="number">10px</span> -<span class="number">9px</span> <span class="built_in">rgba</span>(0,0,0,0.4);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* back, initially hidden pane */</span></div><div class="line"><span class="selector-class">.back</span> &#123;</div><div class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(180deg);</div><div class="line">  <span class="attribute">box-shadow</span>: -<span class="number">8px</span> <span class="number">10px</span> <span class="number">10px</span> -<span class="number">9px</span> <span class="built_in">rgba</span>(0,0,0,0.4);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><ul>
<li>在<code>flip-container</code>容器元素上设置整个动画区域的透视<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/perspective" target="_blank" rel="external">perspective</a>属性</li>
<li>当<code>flip-container</code>元素遇到鼠标悬停事件时，<code>flipper</code>旋转180deg，这里是控制旋转速度的地方，若旋转值设为-180deg，逆方向旋转</li>
<li>表示卡片正反面的元素都要绝对定位，这样他们才能在相同的位置相互遮挡，他们的背面可视性<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/backface-visibility" target="_blank" rel="external">backface-visibility</a>设置为隐藏，这样每个卡片的背面在翻转时都看不见的</li>
<li>将卡片的正面设置为比一个背面要高的<code>z-index</code>的值，保证卡片的正面在最上面</li>
<li>将背面卡片旋转180deg，这样能让她扮演背面的角色</li>
</ul>
<h2 id="Ana-Tudor’s-quote"><a href="#Ana-Tudor’s-quote" class="headerlink" title="Ana Tudor’s quote"></a>Ana Tudor’s quote</h2><blockquote>
<p>对卡片元素的<a href="https://drafts.csswg.org/css-transforms/#transform-style-property" target="_blank" rel="external">某些属性设置一些特定的值</a>(例如)(like overflow: hidden)会导致其子元素丧失3D变换功能。我认可他的观点，因为正是在本文的例子中我正好遇到了overflow: hidden相关的麻烦，它导致了3D变换子元素全都出现在了同一个平面上，有几个是被旋转了180度。</p>
</blockquote>
<h2 id="触发css翻转"><a href="#触发css翻转" class="headerlink" title="触发css翻转"></a>触发css翻转</h2><p>若你喜欢用javaScript来触发翻转动作，下面这个简单的css样式能帮到你</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.flip-container</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.flipper</span>, <span class="selector-class">.flip-container</span><span class="selector-class">.hover</span> <span class="selector-class">.flipper</span>, <span class="selector-class">.flip-container</span><span class="selector-class">.flip</span> <span class="selector-class">.flipper</span> &#123;</div><div class="line">	<span class="attribute">transform</span>: <span class="built_in">rotateY</span>(180deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用javascript给容器元素添加这个css <code>flip</code>类就能触发卡片翻转，不需要用户系统鼠标在上面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">"#myCard"</span>).classList.toggle(<span class="string">"flip"</span>);</div></pre></td></tr></table></figure>
<p>资料:<a href="http://www.webhek.com/post/css-flip.html" target="_blank" rel="external">3d翻转效果</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://leocecilia.github.io/2017/03/18/3dtagCloud/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="vivian">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/vivian.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="vivian blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="vivian blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/18/3dtagCloud/" itemprop="url">
                  3dtagCloud
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-18T20:13:14+08:00">
                2017-03-18
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近准备要找实习了，然后就想着要做个漂漂亮亮的简历。想起ife项目中的标签云，于是便准备做一个3d的标签云效果</p>
<hr>
<h2 id="总体思路"><a href="#总体思路" class="headerlink" title="总体思路"></a>总体思路</h2><ul>
<li>为所有标签要随机生成坐标，平均分布在球面上，然后再根据旋转公式，获取旋转后的坐标，然后再进行动画。以下是具体做法</li>
</ul>
<h3 id="重要概念"><a href="#重要概念" class="headerlink" title="重要概念"></a>重要概念</h3><ul>
<li>sinθ与cosθ的值域为[-1,1]（很重要）</li>
<li>球坐标公式，以坐标原点为中心，半径为R的球面的参数方程为</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x = r * sinθ * cosΦ;</div><div class="line">y = r * sinθ * sinΦ;  </div><div class="line">z = r * cosθ;</div></pre></td></tr></table></figure>
<p>  <span id="jump"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/Spherical_with_grid.svg/300px-Spherical_with_grid.svg.png" alt="原理"></span><br>资料：<a href="http://baike.baidu.com/item/%E7%90%83%E9%9D%A2?fr=aladdin" target="_blank" rel="external">球坐标公式推导</a></p>
<ul>
<li>旋转公式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">c = cosβ * x - sinβ * y;<span class="comment">//(x,y,z)为旋转前的坐标，(c,d,z1)为旋转后的坐标</span></div><div class="line">d = cosβ * y - sinβ * x;</div></pre></td></tr></table></figure>
<p><img src="http://pic002.cnblogs.com/img/ywxgod/201008/2010080600581929.jpg" alt="原理"><br>球绕某一轴旋转可以抽象成圆绕圆心旋转!<br>资料：<a href="http://www.cnblogs.com/ywxgod/archive/2010/08/06/1793609.html" target="_blank" rel="external">坐标旋转公式推导</a></p>
<h2 id="设置坐标"><a href="#设置坐标" class="headerlink" title="设置坐标"></a>设置坐标</h2><p>设置坐标是相对较难的一步，因为我们要将标签平均分布在球面上，藉此，引用一下大神的式子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">θ = arccos(((<span class="number">2</span> * i) - <span class="number">1</span>) / len - <span class="number">1</span>); </div><div class="line">Φ = θ * sqrt(len * π);</div></pre></td></tr></table></figure>
<p><a href="#jump">如图</a></p>
<blockquote>
<p>第一个式子<code>arccos</code>中的<code>(2 * i) - 1) / len - 1</code>实际上是一个在[-1,1]区间中关于0对称的等差数列(因为sinθ,cosθ的值域是[-1,1]),第二个式子中的<code>sqrt(len * π)</code>却不是很懂其中的原理</p>
</blockquote>
<p>详细代码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; tagLen; i++) &#123;</div><div class="line">        <span class="comment">// 设置随机坐标，平均分布</span></div><div class="line">        <span class="keyword">let</span> a = <span class="built_in">Math</span>.acos((<span class="number">2</span> * (i + <span class="number">1</span>) - <span class="number">1</span>) / tagLen - <span class="number">1</span>), <span class="comment">// θ = arccos(((2*(i+1))-1)/len - 1),基于[-1,1]的关于0对称的等差数列</span></div><div class="line">          b = a * <span class="built_in">Math</span>.sqrt(tagLen * <span class="built_in">Math</span>.PI), <span class="comment">// Φ = θ*sqrt(all * π)，不懂原理</span></div><div class="line">          x = R * <span class="built_in">Math</span>.sin(a) * <span class="built_in">Math</span>.cos(b), <span class="comment">// x轴坐标: x=r*sinθ*cosΦ，详情请参考https://zh.wikipedia.org/wiki/%E7%90%83%E5%BA%A7%E6%A8%99%E7%B3%BB</span></div><div class="line">          y = R * <span class="built_in">Math</span>.sin(a) * <span class="built_in">Math</span>.sin(b), <span class="comment">// y轴坐标: x=r*sinθ*cosΦ</span></div><div class="line">          z = R * <span class="built_in">Math</span>.cos(a), <span class="comment">// z轴坐标: z=r*cosθ</span></div><div class="line">          t = <span class="keyword">new</span> tag(tagEle[i], x, y, z);</div><div class="line"></div><div class="line">        tagEle[i].style.color = <span class="string">'#'</span> + <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">0xffffff</span>).toString(<span class="number">16</span>); <span class="comment">// 设置随机颜色</span></div><div class="line">        tags.push(t);</div><div class="line">        t.move(); <span class="comment">// 初始化位置</span></div><div class="line">      &#125;</div></pre></td></tr></table></figure>
<h2 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h2><p>先前已经说明了思路，现在就直接post上代码吧</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">rotateX</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">let</span> cos = <span class="built_in">Math</span>.cos(angleX),</div><div class="line">        sin = <span class="built_in">Math</span>.sin(angleX);</div><div class="line">      <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;tags.length;i++)&#123;</div><div class="line">      	<span class="keyword">let</span> y = tags[i].y * cos - tags[i].z * sin,</div><div class="line">          z = tags[i].z * cos + tags[i].y * sin;</div><div class="line">        tags[i].y = y;</div><div class="line">        tags[i].z = z;</div><div class="line">      &#125;        </div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<p>其中angleX和angleY是旋转角速度的，可按需求设置，<strong>注意</strong> 在单位时间内<code>v=w*r</code>，且旋转360度跟没旋转的效果一样。</p>
<h2 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">tag.prototype = &#123;</div><div class="line">      <span class="attr">move</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">let</span> scale = length / (length - <span class="keyword">this</span>.z),</div><div class="line">          alpha = (<span class="keyword">this</span>.z + R) / (<span class="number">2</span> * R),</div><div class="line">          ele = <span class="keyword">this</span>.ele;</div><div class="line">        ele.style.fontSize = <span class="number">15</span> * scale + <span class="string">"px"</span>;</div><div class="line">        ele.style.opacity = alpha + <span class="number">0.5</span>;</div><div class="line">        ele.style.zIndex = <span class="built_in">parseInt</span>(scale * <span class="number">100</span>);</div><div class="line">        <span class="comment">// 原点是 (cloud.offsetWidth/2, cloud.offsetHeight/2)</span></div><div class="line">        ele.style.left = <span class="keyword">this</span>.x + board.offsetWidth / <span class="number">2</span> - ele.offsetWidth / <span class="number">2</span> + <span class="string">"px"</span>;</div><div class="line">        ele.style.top = <span class="keyword">this</span>.y + board.offsetHeight / <span class="number">2</span> - ele.offsetHeight / <span class="number">2</span> + <span class="string">"px"</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<p>scale,alpha都是取关于z坐标递增的函数，用于设置<code>font-size</code>，<code>opacity</code>与<code>z-index</code>为了能够更好地形成视觉差(3d效果)，可按需设置！</p>
<p><a href="https://leocecilia.github.io/resume/">预览</a></p>
<p>参考链接 <a href="http://www.cnblogs.com/axes/p/3501424.html" target="_blank" rel="external">3dtagCloud</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/vivian.jpg"
               alt="vivian" />
          <p class="site-author-name" itemprop="name">vivian</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/LeoCecilia" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/2246130302?topnav=1&wvr=6&topsug=1&is_all=1" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://codepen.io/leoCecilia/" target="_blank" title="Codepen">
                  
                    <i class="fa fa-fw fa-codepen"></i>
                  
                  Codepen
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.freecodecamp.com/leocecilia" target="_blank" title="Freecodecamp">
                  
                    <i class="fa fa-fw fa-freecodecamp"></i>
                  
                  Freecodecamp
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">vivian</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  


</body>
</html>
